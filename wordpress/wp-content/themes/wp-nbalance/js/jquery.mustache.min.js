!function(t,e){if("object"==typeof exports&&exports)e(exports);else{var n={};e(n),"function"==typeof define&&define.amd?define(n):t.Mustache=n}}(this,function(t){function e(t){return"function"==typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t){if(!l(t)||2!==t.length)throw Error("Invalid tags: "+t);return[RegExp(n(t[0])+"\\s*"),RegExp("\\s*"+n(t[1]))]}function s(t){this.tail=this.string=t,this.pos=0}function i(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function o(){this.cache={}}var a=RegExp.prototype.test,c=/\S/,h=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===h.call(t)},p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},u=/\s*/,f=/\s+/,g=/\s*=/,d=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;s.prototype.eos=function(){return""===this.tail},s.prototype.scan=function(t){return(t=this.tail.match(t))&&0===t.index?(t=t[0],this.tail=this.tail.substring(t.length),this.pos+=t.length,t):""},s.prototype.scanUntil=function(t){t=this.tail.search(t);var e;switch(t){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=e.length,e},i.prototype.push=function(t){return new i(t,this)},i.prototype.lookup=function(t){var n;if(t in this.cache)n=this.cache[t];else{for(var r=this;r;){if(0<t.indexOf(".")){n=r.view;for(var s=t.split("."),i=0;null!=n&&i<s.length;)n=n[s[i++]]}else n=r.view[t];if(null!=n)break;r=r.parent}this.cache[t]=n}return e(n)&&(n=n.call(this.view)),n},o.prototype.clearCache=function(){this.cache={}},o.prototype.parse=function(e,i){var o=this.cache,h=o[e];if(null==h){var l;l=i||t.tags,h=e||"","string"==typeof l&&(l=l.split(f));for(var p,k,y,w,b=r(l),x=new s(h),U=[],h=[],m=[],E=!1,T=!1;!x.eos();){if(p=x.pos,y=x.scanUntil(b[0])){w=0;for(var j=y.length;w<j;++w)if(k=y.charAt(w),a.call(c,k)?T=!0:m.push(h.length),h.push(["text",k,p,p+1]),p+=1,"\n"===k){if(E&&!T)for(;m.length;)delete h[m.pop()];else m=[];T=E=!1}}if(!x.scan(b[0]))break;if(E=!0,k=x.scan(v)||"name",x.scan(u),"="===k?(y=x.scanUntil(g),x.scan(g),x.scanUntil(b[1])):"{"===k?(y=x.scanUntil(RegExp("\\s*"+n("}"+l[1]))),x.scan(d),x.scanUntil(b[1]),k="&"):y=x.scanUntil(b[1]),!x.scan(b[1]))throw Error("Unclosed tag at "+x.pos);if(w=[k,y,p,x.pos],h.push(w),"#"===k||"^"===k)U.push(w);else if("/"===k){if(k=U.pop(),!k)throw Error('Unopened section "'+y+'" at '+p);if(k[1]!==y)throw Error('Unclosed section "'+k[1]+'" at '+p)}else"name"===k||"{"===k||"&"===k?T=!0:"="===k&&(b=r(l=y.split(f)))}if(k=U.pop())throw Error('Unclosed section "'+k[1]+'" at '+x.pos);l=[];for(var C,x=0,U=h.length;x<U;++x)(b=h[x])&&("text"===b[0]&&C&&"text"===C[0]?(C[1]+=b[1],C[3]=b[3]):(l.push(b),C=b));for(m=C=[],h=[],x=0,U=l.length;x<U;++x)switch(b=l[x],b[0]){case"#":case"^":m.push(b),h.push(b),m=b[4]=[];break;case"/":m=h.pop(),m[5]=b[2],m=0<h.length?h[h.length-1][4]:C;break;default:m.push(b)}h=o[e]=C}return h},o.prototype.render=function(t,e,n){var r=this.parse(t);return e=e instanceof i?e:new i(e),this.renderTokens(r,e,n,t)},o.prototype.renderTokens=function(n,r,s,i){function o(t){return p.render(t,r,s)}for(var a,c,h="",p=this,u=0,f=n.length;u<f;++u)switch(a=n[u],a[0]){case"#":if(c=r.lookup(a[1]),!c)continue;if(l(c))for(var g=0,d=c.length;g<d;++g)h+=this.renderTokens(a[4],r.push(c[g]),s,i);else if("object"==typeof c||"string"==typeof c)h+=this.renderTokens(a[4],r.push(c),s,i);else if(e(c)){if("string"!=typeof i)throw Error("Cannot use higher-order sections without the original template");c=c.call(r.view,i.slice(a[3],a[5]),o),null!=c&&(h+=c)}else h+=this.renderTokens(a[4],r,s,i);break;case"^":c=r.lookup(a[1]),(!c||l(c)&&0===c.length)&&(h+=this.renderTokens(a[4],r,s,i));break;case">":if(!s)continue;c=e(s)?s(a[1]):s[a[1]],null!=c&&(h+=this.renderTokens(this.parse(c),r,s,c));break;case"&":c=r.lookup(a[1]),null!=c&&(h+=c);break;case"name":c=r.lookup(a[1]),null!=c&&(h+=t.escape(c));break;case"text":h+=a[1]}return h},t.name="mustache.js",t.version="0.8.1",t.tags=["{{","}}"];var k=new o;t.clearCache=function(){return k.clearCache()},t.parse=function(t,e){return k.parse(t,e)},t.render=function(t,e,n){return k.render(t,e,n)},t.to_html=function(n,r,s,i){return n=t.render(n,r,s),e(i)?void i(n):n},t.escape=function(t){return String(t).replace(/[&<>"'\/]/g,function(t){return p[t]})},t.Scanner=s,t.Context=i,t.Writer=o});
//# sourceMappingURL=maps/jquery.mustache.min.js.map
